function Loading(e){"undefined"==typeof e?($("#feedback-send").prop("disabled",!1),$("#feedback-send").html('Отправляется <i class="fa fa-spinner fa-spin fa-pulse"></i>')):e||($("#feedback-send").html("Отправлено"),$("#feedback-send").prop("disabled",!0))}$("#feedback-send").click(function(){var e=/^[а-яА-Яё,\W\.\s-]+$/i;if($("#feedback-name").val().length<2||!e.test($("#feedback-name").val()))return void alert("Корректно заполните Ваше имя");var a=/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;if($("#feedback-email").val().length<6||!a.test($("#feedback-email").val()))return void alert("Корректно заполните Ваш email");if($("#feedback-comment").val().length<4)return void alert("Корректно заполните Ваше обращение");if(Loading(),!re_email.test($("#feedback-email").val()))return Loading(0),alert('Пожалуйста, заполните поле "ваш емаил" корректно.'),$("#feedback-send").prop("disabled",!1),void $("#feedback-send").html("Отправить");var p;if("/form"==window.location.pathname){var n=$("#anketa").serialize();n=decodeURIComponent(n),n=n.replace(new RegExp("&step","g"),"&Шаг"),n=n.replace(new RegExp("&period","g"),"&Срок"),n=n.replace(new RegExp("display=0","g"),"Декстоп версия"),n=n.replace(new RegExp("display=1","g"),"Мобайл версия"),n=n.replace(new RegExp("referer","g"),"Откуда пришли"),n=n.replace(new RegExp("&f=","g"),"&Фамилия="),n=n.replace(new RegExp("&i=","g"),"&Имя="),n=n.replace(new RegExp("&o=","g"),"&Отчество="),n=n.replace(new RegExp("gender=0","g"),"Пол женский"),n=n.replace(new RegExp("gender=1","g"),"Пол мужской"),n=n.replace(new RegExp("&birth_dd=0&birth_mm=0&birth_yyyy=0","g"),""),n=n.replace(new RegExp("birthdate","g"),"Дата рождения"),n=n.replace(new RegExp("&phone=","g"),"&Телефон="),n=n.replace(new RegExp("&email","g"),"&Емаил"),n=n.replace(new RegExp("&delays_type=never","g"),"&Никогда не брал(а) кредитов"),n=n.replace(new RegExp("&delays_type=credit_closed_no_delay","g"),"&Кредиты закрыты, просрочек не было"),n=n.replace(new RegExp("&delays_type=credit_open_no_delay","g"),"&Кредиты есть, просрочек нет"),n=n.replace(new RegExp("&delays_type=credit_closed_had_delay","g"),"&Кредиты закрыты, просрочки были"),n=n.replace(new RegExp("&delays_type=had_delay","g"),"&Просрочки были, сейчас нет"),n=n.replace(new RegExp("&delays_type=had_delay","g"),"&Просрочки сейчас есть"),n=n.replace(new RegExp("rangeSlider","g"),"Сумма"),n=n.replace(new RegExp("ammount","g"),"Сумма"),n=n.replace(new RegExp("amount","g"),"Сумма"),n=n.replace(new RegExp("&passport=","g"),"&Серия и номер паспорта="),n=n.replace(new RegExp("passport_s","g"),"Серия паспорта"),n=n.replace(new RegExp("passport_n","g"),"Номер паспорта"),n=n.replace(new RegExp("passport_dd","g"),"День выдачи"),n=n.replace(new RegExp("passport_mm","g"),"Месяц выдачи"),n=n.replace(new RegExp("passport_yyyy","g"),"Год выдачи"),n=n.replace(new RegExp("passportdate","g"),"Дата выдачи"),n=n.replace(new RegExp("passport_code","g"),"Код подразделения"),n=n.replace(new RegExp("passport_who","g"),"Кем выдан"),n=n.replace(new RegExp("birthplace","g"),"Место рождения"),n=n.replace(new RegExp("&region=","g"),"&Регион="),n=n.replace(new RegExp("&city=","g"),"&Населённый пункт="),n=n.replace(new RegExp("&street=","g"),"&Улица проживания="),n=n.replace(new RegExp("&building=","g"),"&Дом="),n=n.replace(new RegExp("&housing=","g"),"&Корпус="),n=n.replace(new RegExp("flat=","g"),"Квартира="),n=n.replace(new RegExp("reg_type=1","g"),"Постоянная регистрация"),n=n.replace(new RegExp("reg_type=0","g"),"Без регистрации"),n=n.replace(new RegExp("reg_type=2","g"),"Временная регистрация"),n=n.replace(new RegExp("&reg_same=1","g"),""),n=n.replace(new RegExp("&work=","g"),"&Вид трудоустройства="),n=n.replace(new RegExp("work_name","g"),"Место работы"),n=n.replace(new RegExp("work_occupation","g"),"Должность"),n=n.replace(new RegExp("work_phone","g"),"Рабочий телефон"),n=n.replace(new RegExp("work_experience","g"),"Стаж"),n=n.replace(new RegExp("work_salary","g"),"Зарплата"),n=n.replace(new RegExp("work_region","g"),"Регион работы"),n=n.replace(new RegExp("work_city","g"),"Город работы"),n=n.replace(new RegExp("work_street","g"),"Улица работы"),n=n.replace(new RegExp("work_house","g"),"Номер дома работы"),n=n.replace(new RegExp("work_office","g"),"Офис работы"),_info=_info.replace(new RegExp("undefined","g"),"неопределено"),p={name:$("#feedback-name").val(),phone:$("#feedback-phone").val(),email:$("#feedback-email").val(),comment:"Обращение: "+$("#feedback-comment").val()+_info+"\n | Разрешение экрана: "+x_size+" x "+y_size+"\n | Данные:"+n}}else p={name:$("#feedback-name").val(),phone:$("#feedback-phone").val(),email:$("#feedback-email").val(),comment:"Обращение: "+$("#feedback-comment").val()+_info+"\n | Разрешение экрана: "+x_size+" x "+y_size};"undefined"!=typeof p.phone&&""!=p.phone&&"undefined"!=typeof p.email&&""!=p.email&&"undefined"!=typeof p.comment&&""!=p.comment?$.ajax({url:"/feedback/",type:"POST",dataType:"json",data:p}).done(function(e){null!=e?"undefined"!=typeof e.error?alert("Ошибка. "+e.error):($("#feedbackModal").modal("hide"),Loading(0),alert("Заявка отправлена. Мы ответим вам в ближайшее время.")):alert("Не получилось отправить. Попробуйте ещё раз.")}).fail(function(e,a,p){alert("Не получилось отправить. Попробуйте ещё раз.")}).always(function(){Loading(0)}):(Loading(0),alert("Пожалуйста, заполните все поля."))});